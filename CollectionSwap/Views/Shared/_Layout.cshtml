@using Microsoft.AspNet.Identity
@{
    var currentAction = ViewContext.RouteData.Values["action"] as string;
    var currentController = ViewContext.RouteData.Values["controller"] as string;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swapper - @ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

</head>
<body class="@(currentAction == "Support" ? "support-bg-split" : "")">
    <nav class="main-navbar" @* @(currentController == "Account" ? "bg-split" : "")"*@>
        <ul>
            <li>
                @Html.ActionLink("Swapper", "Index", "Home")
            </li>
            <li class="@(currentController == "Home" && currentAction == "About" ? "selected" : "")">
                <a href="/Home/About">About</a>
            </li>
            <li class="@(currentController == "Home" && currentAction == "Support" ? "selected" : "")">
                <a href="/Home/Support">Support</a>
            </li>
            @if (Request.IsAuthenticated)
            {
                using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "row gap-2" }))
                {
                    @Html.AntiForgeryToken()
                    <li class="@(currentController == "Manage" ? "selected" : "")">
                        @Html.ActionLink("Hello " + User.Identity.GetUserName() + "!", "SwapHistory", "Manage")
                    </li>
                    <li><a href="javascript:document.getElementById('logoutForm').submit()">Log off</a></li>
                }
            }
            else
            {
                <li>@Html.ActionLink("Login", "Login", "Account")</li>
            }
        </ul>
    </nav>

    <main @*class="@(currentAction == "Login" ? "bg-split" : "")"*@>
        @RenderBody()
    </main>

    @Scripts.Render("~/bundles/jquery")
    @*@Scripts.Render("~/bundles/bootstrap")*@
    @RenderSection("scripts", required: false)
</body>
</html>
